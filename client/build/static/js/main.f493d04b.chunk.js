(this["webpackJsonpnote-app"]=this["webpackJsonpnote-app"]||[]).push([[0],{11:function(t,e,n){},42:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),r=n(27),s=n.n(r),o=(n(11),n(9)),i=n(20),u=n(3),j=n(1);var l=function(t){return Object(j.jsxs)("div",{className:"header",children:[Object(j.jsx)("h2",{className:"header-title",children:"Notes"}),Object(j.jsx)("h4",{className:"header-subtitle",children:"Enter your note or create a new note"})]})};var b=function(t){return Object(j.jsx)("div",{className:"button",onClick:void 0!==t.onClick?t.onClick:null,onDoubleClick:void 0!==t.onDoubleClick?t.onDoubleClick:null,children:Object(j.jsx)("button",{children:t.text})})},d=n(4),O=a.a.createContext();var x=function(t){return Object(j.jsx)(O.Provider,{value:t.value,children:t.children})},h=n(14),f=n(10),p=n.n(f),v=n(17);function m(t){return function(e){e({type:"setOpen",open:t})}}function g(){return function(){var t=Object(v.a)(p.a.mark((function t(e){var n,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("make call"),t.next=3,fetch("".concat("","api/v1/"),{method:"GET"});case 3:return n=t.sent,t.next=6,n.json();case 6:c=t.sent,e({type:"getNotes",notes:c});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var N=function(t){var e=Object(c.useContext)(O),n=Object(c.useState)({title:"",text:""}),a=Object(o.a)(n,2),r=a[0],s=a[1],i=e.dispatch,u=e.state.open,l=e.state.notes;return Object(j.jsxs)("div",{className:"popup",to:"/popup",children:[Object(j.jsxs)("div",{className:"popup__container",children:[Object(j.jsx)("input",{onChange:function(t){return s((function(e){return Object(d.a)(Object(d.a)({},e),{},{title:t.target.value})}))},placeholder:"Title"}),Object(j.jsx)("textarea",{onChange:function(t){return s((function(e){return Object(d.a)(Object(d.a)({},e),{},{text:t.target.value})}))},placeholder:"Text"}),Object(j.jsx)(b,{onClick:function(){var t=r.title,e=r.text;""!==t.trim()&&""!==e.trim()&&(!function(t,e){return function(){var n=Object(v.a)(p.a.mark((function n(c){var a,r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat("","api/v1/notes/"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({title:e.title,text:e.text})});case 2:return a=n.sent,n.next=5,a.json();case 5:r=n.sent,t=[].concat(Object(h.a)(t),[{_id:r._id,title:e.title,text:e.text}]),console.log(t),c({type:"createNote",notes:t});case 9:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}(l,r)(i),m(!u)(i))},text:"Create note"})]}),Object(j.jsx)(b,{onClick:function(){m(!u)(i)},text:""})]})},C={notes:[],open:!1};function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"setOpen":return Object(d.a)(Object(d.a)({},t),{},{open:e.open});case"handleNoteChanges":case"removeNote":case"getNotes":case"createNote":return Object(d.a)(Object(d.a)({},t),{},{notes:Object(h.a)(e.notes)});default:return t}}var k=function(t){var e=Object(c.useContext)(O),n=e.dispatch,a=e.state.notes,r=e.state.open;return Object(c.useEffect)((function(){return g()(n)}),[n]),Object(j.jsxs)("div",{className:"notes",children:[r?Object(j.jsx)(N,{}):null,Object(j.jsx)(l,{}),Object(j.jsx)(b,{onClick:function(){m(!r)(n)},text:"+"}),Object(j.jsx)("div",{className:"notes__container",children:a.length>0?a.map((function(t){return Object(j.jsx)("div",{className:"note-link_container",children:Object(j.jsx)(i.b,{to:"/notes/".concat(t._id),children:Object(j.jsxs)("div",{className:"note-link",children:[Object(j.jsx)("h2",{children:t.title}),Object(j.jsx)("p",{children:t.text})]})})},t._id)})):Object(j.jsx)("div",{className:"notes__container-desc",children:Object(j.jsx)("div",{className:"notes__container-desc-text",children:"Sorry but now you haven`t any note, if you want create it push on create button"})})})]})},y=n(13),w=n(15),S=n(25);var T=function(t){return Object(j.jsx)("div",{className:"lds-dual-ring"})};var E=function(){return Object(j.jsx)("div",{className:"disclaimer",children:"\u0412\u044b \u0437\u0430\u0431\u044b\u043b\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})};var D=function(t){y.b.add(w.c,w.b,w.a);var e=Object(c.useContext)(O),n=e.dispatch,a=e.state.notes,r=Object(u.e)(),s=Object(u.f)().id,i=Object(c.useState)({}),l=Object(o.a)(i,2),x=l[0],h=l[1],f=Object(c.useState)(!1),m=Object(o.a)(f,2),N=m[0],C=m[1],_=Object(c.useState)(!1),k=Object(o.a)(_,2),D=k[0],P=k[1],F=Object(c.useState)(!0),J=Object(o.a)(F,2),L=J[0],B=J[1],I=Object(c.useState)(!1),A=Object(o.a)(I,2),G=A[0],M=A[1],R=Object(c.useState)(!1),U=Object(o.a)(R,2),q=U[0],z=U[1];function H(){!function(t,e){return function(){var n=Object(v.a)(p.a.mark((function n(c){var a,r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat("","api/v1/notes/").concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({title:e.title,text:e.text})});case 2:if(!(a=n.sent).ok){n.next=9;break}return n.next=6,a.json();case 6:r=n.sent,t=t.map((function(t){return t._id===r._id?Object(d.a)({},r):t})),console.log(t);case 9:c({type:"handleNoteChanges",notes:t});case 10:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}(a,x)(n)}function K(t){C(t),D&&P(!D)}function Q(t){N&&C(!N),P(t)}function V(t){!function(t,e){return function(){var n=Object(v.a)(p.a.mark((function n(c){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat("","api/v1/notes/").concat(e),{method:"DELETE"});case 2:n.sent.ok&&t.filter((function(t){return t._id!==e})),c({type:"removeNote",notes:t});case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}(a,t)(n),r.push("/")}return console.log(a),Object(c.useEffect)((function(){if(console.log("changed",a),a.length>0){var t=a.find((function(t){return t._id===s}));h({title:t.title,text:t.text,id:t._id})}}),[a]),Object(c.useEffect)((function(){return g()(n)}),[n]),Object(j.jsxs)("div",{className:"note",children:[Object(j.jsxs)("div",{className:"note__header",children:[Object(j.jsxs)("div",{className:"note__header-back_button",children:[G&&Object(j.jsx)(E,{}),Object(j.jsx)(b,{onClick:function(){M(!0),!1!==L&&(r.push("/"),N&&K(!1),D&&Q(!1),M(!1))},text:Object(j.jsx)(S.a,{icon:w.a})})]}),Object(j.jsx)("div",{className:"note__header-title",onClick:function(){K(!0),M(!1)},children:N?Object(j.jsx)("input",{value:x.title,onChange:function(t){h((function(e){return Object(d.a)(Object(d.a)({},e),{},{title:t.target.value})})),B(!1)}}):a.length>0?Object(j.jsx)("h1",{children:x.title}):Object(j.jsx)(T,{})}),Object(j.jsx)(b,{onClick:function(){N||D?function(){var t=x.title,e=x.text;""!==t.trim()&&""!==e.trim()&&z(!q),N&&K(),D&&Q(),H(),B(!0),M(!1)}():V(s)},text:Object(j.jsx)(S.a,{icon:N||D?w.b:w.c})})]}),Object(j.jsx)("div",{className:"note__wrapper",children:Object(j.jsx)("div",{className:"note__content",onClick:function(){Q(!0),M(!1)},children:D?Object(j.jsx)("textarea",{value:x.text,onChange:function(t){h((function(e){return Object(d.a)(Object(d.a)({},e),{},{text:t.target.value})})),B(!1)}}):a.length>0?Object(j.jsx)("div",{children:x.text}):Object(j.jsx)(T,{})})})]})};var P=function(){var t=Object(c.useReducer)(_,C),e=Object(o.a)(t,2),n=e[0],a=e[1];return Object(j.jsx)(x,{value:{state:n,dispatch:a},children:Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(i.a,{children:[Object(j.jsx)(u.a,{exact:!0,path:"/",render:function(){return Object(j.jsx)(k,{})}}),Object(j.jsx)(u.a,{path:"/notes/:id",render:function(t){return Object(j.jsx)(D,{})},onLeave:function(){return alert("stoj")}})]})})})},F=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,s=e.getTTFB;n(t),c(t),a(t),r(t),s(t)}))};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(P,{})}),document.getElementById("root")),F()}},[[42,1,2]]]);
//# sourceMappingURL=main.f493d04b.chunk.js.map